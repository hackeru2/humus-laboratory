import{h as $}from"./index.QHQq_OEs.js";import{x,a$ as r,b0 as F,b1 as O}from"./entry.2B-j7TqJ.js";import{u as C}from"./asyncData.oPSwcWxI.js";function A(n,c,i){const[t={},u]=typeof c=="string"?[{},c]:[c,i],e=x(()=>{let a=n;return typeof a=="function"&&(a=a()),r(a)}),o=t.key||$([u,typeof e.value=="string"?e.value:"",...E(t)]);if(!o||typeof o!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+o);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const f=o===u?"$f"+o:o;if(!t.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:y,default:b,transform:d,pick:g,watch:h,immediate:w,getCachedData:v,deep:_,...k}=t,p=F({...O,...k,cache:typeof t.cache=="boolean"?void 0:t.cache}),D={server:m,lazy:y,default:b,transform:d,pick:g,immediate:w,getCachedData:v,deep:_,watch:h===!1?[]:[p,e,...h||[]]};let s;return C(f,()=>{var l;(l=s==null?void 0:s.abort)==null||l.call(s),s=typeof AbortController<"u"?new AbortController:{};const a=r(t.timeout);return a&&setTimeout(()=>s.abort(),a),(t.$fetch||globalThis.$fetch)(e.value,{signal:s.signal,...p})},D)}function E(n){var i;const c=[((i=r(n.method))==null?void 0:i.toUpperCase())||"GET",r(n.baseURL)];for(const t of[n.params||n.query]){const u=r(t);if(!u)continue;const e={};for(const[o,f]of Object.entries(u))e[r(o)]=r(f);c.push(e)}return c}export{A as u};
