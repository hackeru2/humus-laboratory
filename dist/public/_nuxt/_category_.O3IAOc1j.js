import{_ as P}from"./nuxt-link.2fz8DMO8.js";import{V as O,a as F}from"./VCard.lgHhGp1w.js";import{p as S,m as N,a as j,g as I,u as L,b as R,c as p,d as w,o as r,e as d,w as u,t as f,f as m,h,V as v,i as a,j as T,k as A,l as E,n as q,q as D,r as H,s as M,v as U,x as G,F as C,y as k,z as b,A as J,B as K}from"./entry.2B-j7TqJ.js";import{u as Q}from"./fetch.qchLwLmQ.js";import"./index.QHQq_OEs.js";import"./asyncData.oPSwcWxI.js";const W=S({fluid:{type:Boolean,default:!1},...N(),...j()},"VContainer"),X=I()({name:"VContainer",props:W(),setup(n,e){let{slots:i}=e;const{rtlClasses:o}=L();return R(()=>p(n.tag,{class:["v-container",{"v-container--fluid":n.fluid},o.value,n.class],style:n.style},i)),{}}}),Y={key:0,class:"absolute bg-primary font-serif p-1 right-0 rounded-bl-md rounded-br-none rounded-tl-none rounded-tr-sm text-white text-xs z-10"},Z={class:"h-64 relative"},ee={class:"-m-4 bg-white p-8 rounded-lg"},te={class:"text-base"},se={class:"flex font-medium items-center justify-between mt-4"},ae={class:"font-bold text-base"},re=w({__name:"ProductCard",props:{id:{},title:{},price:{},description:{},category:{},image:{},imageOptimized:{},rating:{},badge:{},shipping:{}},setup(n){return(e,i)=>{const o=P;return r(),d(o,{class:"m-4 relative w-full md:w-1/3 lg:w-1/4 xl:w-1/5",to:`/store/${e.id}`},{default:u(()=>[e.badge?(r(),m("span",Y,f(e.badge),1)):h("",!0),p(O,{border:"",variant:"outlined",class:"md:h-full"},{default:u(()=>[a("div",Z,[a("div",ee,[a("div",null,[e.imageOptimized?(r(),d(v,{key:0,src:e.imageOptimized.src,srcset:e.imageOptimized.srcset,sizes:e.imageOptimized.sizes,height:"250"},null,8,["src","srcset","sizes"])):(r(),d(v,{key:1,src:e.image,height:"250"},null,8,["src"]))])])]),p(F,{class:"mt-14"},{default:u(()=>[a("div",null,[a("span",te,f(e.title),1),a("div",se,[a("span",ae,"$"+f(e.price),1),e.shipping?(r(),d(T,{key:0,class:"dark:text-primary-400 text-primary-500 text-xs",size:"small",color:"primary"},{default:u(()=>[A(f(e.shipping),1)]),_:1})):h("",!0)])])]),_:1})]),_:1})]),_:1},8,["to"])}}}),ne=async()=>{const{data:n,error:e}=await Q("/api/store/local-data","$dm080I1Lt4");if(e.value)throw E({...e.value,statusMessage:"Couldn't fetch products."});return{...n,fetchCategory:o=>{const{optimizeImage:g}=q();return n.value.products.filter(s=>!o||s.category===o).map(s=>s.image?{...s,imageOptimized:g(s.image)}:s)}}},oe={class:"pb-16"},ie={key:0,class:"flex items-center justify-center m-4"},le=a("span",{class:"font-bold text-sm"},"Filter Badges",-1),ce={class:"ml-4 mt-2"},de={"data-pg-name":"Products",class:"flex flex-wrap justify-center"},ve=w({__name:"[category]",async setup(n){let e,i;const o=D(),g=t=>t&&t[0].toUpperCase()+t.slice(1)||"";H({title:()=>g(o.params.category)});const{category:s}=o.params,{fetchCategory:z}=([e,i]=M(()=>ne()),e=await e,i(),e),_=z(s==null?void 0:s.toString()),y=[...new Set(_.filter(t=>t.badge).map(t=>t.badge))],l=U((s==null?void 0:s.toString())||"all",()=>new Set),x=t=>{l.value.has(t)?l.value.delete(t):l.value.add(t)},V=G(()=>l.value.size?_.filter(t=>l.value.has(t.badge)):_);return(t,ue)=>{const $=re;return r(),m("div",oe,[p(X,{class:"py-8"},{default:u(()=>[y.length?(r(),m("section",ie,[le,a("div",ce,[(r(),m(C,null,k(y,(c,B)=>p(J,{key:B,text:c,variant:b(l).has(c)?"tonal":"outlined",class:"mr-2",onClick:me=>x(c)},null,8,["text","variant","onClick"])),64))])])):h("",!0),a("section",de,[(r(!0),m(C,null,k(b(V),c=>(r(),d($,K({key:c.id},c),null,16))),128))])]),_:1})])}}});export{ve as default};
